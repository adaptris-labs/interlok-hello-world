plugins {
  id "com.palantir.docker" version "0.25.0"
}

ext {
  interlokParentGradle = project.hasProperty('interlokParentGradle') ? project.getProperty('interlokParentGradle') : "https://raw.githubusercontent.com/adaptris-labs/interlok-build-parent/master/build.gradle"
  interlokVerifyEnvironmentProperties = ['PORT': '8080']
  buildEnv = 'env'
}

allprojects {
  apply from: "${interlokParentGradle}"
}

dockerfileZip.enabled=false

docker {
  name "adaptrislabs/interlok-hello-world"
  tags 'latest'
  copySpec.into("./build/distribution").from(installDist)
  pull true
  noCache true
}

docker.dependsOn installDist
